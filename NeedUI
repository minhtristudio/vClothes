-- vClothes UI Library for Roblox
-- Tạo bởi Assistant

local vClothesUI = {}

-- Services
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Tween Info
local tweenInfo = TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)

-- Màu sắc chủ đạo
local colors = {
    background = Color3.fromRGB(25, 25, 30),
    sidebar = Color3.fromRGB(20, 20, 25),
    accent = Color3.fromRGB(100, 150, 255),
    text = Color3.fromRGB(255, 255, 255),
    textDim = Color3.fromRGB(180, 180, 180),
    hover = Color3.fromRGB(40, 40, 45),
    active = Color3.fromRGB(120, 170, 255),
    border = Color3.fromRGB(50, 50, 55)
}

function vClothesUI:CreateWindow(title)
    local window = {}
    window.tabs = {}
    window.activeTab = nil
    
    -- Tạo ScreenGui
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "vClothesUI"
    screenGui.Parent = playerGui
    screenGui.ResetOnSpawn = false
    
    -- Main Frame
    local mainFrame = Instance.new("Frame")
    mainFrame.Name = "MainFrame"
    mainFrame.Parent = screenGui
    mainFrame.Size = UDim2.new(0, 550, 0, 400)
    mainFrame.Position = UDim2.new(0.5, -275, 0.5, -200)
    mainFrame.BackgroundColor3 = colors.background
    mainFrame.BorderSizePixel = 0
    mainFrame.Active = true
    mainFrame.Draggable = true
    
    -- Corner
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 8)
    corner.Parent = mainFrame
    
    -- Title Bar
    local titleBar = Instance.new("Frame")
    titleBar.Name = "TitleBar"
    titleBar.Parent = mainFrame
    titleBar.Size = UDim2.new(1, 0, 0, 35)
    titleBar.BackgroundColor3 = colors.sidebar
    titleBar.BorderSizePixel = 0
    
    local titleCorner = Instance.new("UICorner")
    titleCorner.CornerRadius = UDim.new(0, 8)
    titleCorner.Parent = titleBar
    
    local titleFix = Instance.new("Frame")
    titleFix.Parent = titleBar
    titleFix.Size = UDim2.new(1, 0, 0, 8)
    titleFix.Position = UDim2.new(0, 0, 1, -8)
    titleFix.BackgroundColor3 = colors.sidebar
    titleFix.BorderSizePixel = 0
    
    local titleLabel = Instance.new("TextLabel")
    titleLabel.Name = "Title"
    titleLabel.Parent = titleBar
    titleLabel.Size = UDim2.new(1, -70, 1, 0)
    titleLabel.Position = UDim2.new(0, 15, 0, 0)
    titleLabel.BackgroundTransparency = 1
    titleLabel.Text = title or "vClothes UI"
    titleLabel.TextColor3 = colors.text
    titleLabel.TextSize = 16
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    
    -- Close Button
    local closeBtn = Instance.new("TextButton")
    closeBtn.Name = "CloseButton"
    closeBtn.Parent = titleBar
    closeBtn.Size = UDim2.new(0, 30, 0, 25)
    closeBtn.Position = UDim2.new(1, -40, 0, 5)
    closeBtn.BackgroundColor3 = Color3.fromRGB(255, 95, 95)
    closeBtn.BorderSizePixel = 0
    closeBtn.Text = "×"
    closeBtn.TextColor3 = colors.text
    closeBtn.TextSize = 18
    closeBtn.Font = Enum.Font.GothamBold
    
    local closeBtnCorner = Instance.new("UICorner")
    closeBtnCorner.CornerRadius = UDim.new(0, 4)
    closeBtnCorner.Parent = closeBtn
    
    closeBtn.MouseButton1Click:Connect(function()
        screenGui:Destroy()
    end)
    
    -- Sidebar (Tab Container)
    local sidebar = Instance.new("Frame")
    sidebar.Name = "Sidebar"
    sidebar.Parent = mainFrame
    sidebar.Size = UDim2.new(0, 150, 1, -35)
    sidebar.Position = UDim2.new(0, 0, 0, 35)
    sidebar.BackgroundColor3 = colors.sidebar
    sidebar.BorderSizePixel = 0
    
    local sidebarCorner = Instance.new("UICorner")
    sidebarCorner.CornerRadius = UDim.new(0, 8)
    sidebarCorner.Parent = sidebar
    
    local sidebarFix = Instance.new("Frame")
    sidebarFix.Parent = sidebar
    sidebarFix.Size = UDim2.new(0, 8, 1, 0)
    sidebarFix.Position = UDim2.new(1, -8, 0, 0)
    sidebarFix.BackgroundColor3 = colors.sidebar
    sidebarFix.BorderSizePixel = 0
    
    local sidebarFix2 = Instance.new("Frame")
    sidebarFix2.Parent = sidebar
    sidebarFix2.Size = UDim2.new(1, 0, 0, 8)
    sidebarFix2.Position = UDim2.new(0, 0, 0, 0)
    sidebarFix2.BackgroundColor3 = colors.sidebar
    sidebarFix2.BorderSizePixel = 0
    
    -- Tab List
    local tabList = Instance.new("ScrollingFrame")
    tabList.Name = "TabList"
    tabList.Parent = sidebar
    tabList.Size = UDim2.new(1, -10, 1, -10)
    tabList.Position = UDim2.new(0, 5, 0, 5)
    tabList.BackgroundTransparency = 1
    tabList.BorderSizePixel = 0
    tabList.ScrollBarThickness = 4
    tabList.ScrollBarImageColor3 = colors.accent
    tabList.CanvasSize = UDim2.new(0, 0, 0, 0)
    
    local tabListLayout = Instance.new("UIListLayout")
    tabListLayout.Parent = tabList
    tabListLayout.FillDirection = Enum.FillDirection.Vertical
    tabListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    tabListLayout.Padding = UDim.new(0, 5)
    
    -- Content Area
    local contentArea = Instance.new("Frame")
    contentArea.Name = "ContentArea"
    contentArea.Parent = mainFrame
    contentArea.Size = UDim2.new(1, -160, 1, -45)
    contentArea.Position = UDim2.new(0, 155, 0, 40)
    contentArea.BackgroundTransparency = 1
    contentArea.BorderSizePixel = 0
    
    window.screenGui = screenGui
    window.mainFrame = mainFrame
    window.sidebar = sidebar
    window.tabList = tabList
    window.contentArea = contentArea
    
    -- Tạo Tab
    function window:CreateTab(name, icon)
        local tab = {}
        tab.name = name
        tab.elements = {}
        
        -- Tab Button
        local tabBtn = Instance.new("TextButton")
        tabBtn.Name = name .. "Tab"
        tabBtn.Parent = tabList
        tabBtn.Size = UDim2.new(1, 0, 0, 40)
        tabBtn.BackgroundColor3 = colors.hover
        tabBtn.BorderSizePixel = 0
        tabBtn.Text = (icon and icon .. " " or "") .. name
        tabBtn.TextColor3 = colors.textDim
        tabBtn.TextSize = 14
        tabBtn.Font = Enum.Font.Gotham
        tabBtn.TextXAlignment = Enum.TextXAlignment.Left
        tabBtn.TextTruncate = Enum.TextTruncate.AtEnd
        
        local tabBtnCorner = Instance.new("UICorner")
        tabBtnCorner.CornerRadius = UDim.new(0, 6)
        tabBtnCorner.Parent = tabBtn
        
        local tabBtnPadding = Instance.new("UIPadding")
        tabBtnPadding.PaddingLeft = UDim.new(0, 15)
        tabBtnPadding.Parent = tabBtn
        
        -- Tab Content
        local tabContent = Instance.new("ScrollingFrame")
        tabContent.Name = name .. "Content"
        tabContent.Parent = contentArea
        tabContent.Size = UDim2.new(1, 0, 1, 0)
        tabContent.BackgroundTransparency = 1
        tabContent.BorderSizePixel = 0
        tabContent.ScrollBarThickness = 4
        tabContent.ScrollBarImageColor3 = colors.accent
        tabContent.CanvasSize = UDim2.new(0, 0, 0, 0)
        tabContent.Visible = false
        
        local contentLayout = Instance.new("UIListLayout")
        contentLayout.Parent = tabContent
        contentLayout.FillDirection = Enum.FillDirection.Vertical
        contentLayout.SortOrder = Enum.SortOrder.LayoutOrder
        contentLayout.Padding = UDim.new(0, 8)
        
        local contentPadding = Instance.new("UIPadding")
        contentPadding.PaddingTop = UDim.new(0, 10)
        contentPadding.PaddingBottom = UDim.new(0, 10)
        contentPadding.PaddingLeft = UDim.new(0, 10)
        contentPadding.PaddingRight = UDim.new(0, 10)
        contentPadding.Parent = tabContent
        
        tab.button = tabBtn
        tab.content = tabContent
        tab.layout = contentLayout
        
        -- Tab Click Event
        tabBtn.MouseButton1Click:Connect(function()
            window:SelectTab(tab)
        end)
        
        -- Hover Effects
        tabBtn.MouseEnter:Connect(function()
            if window.activeTab ~= tab then
                TweenService:Create(tabBtn, tweenInfo, {BackgroundColor3 = colors.hover}):Play()
            end
        end)
        
        tabBtn.MouseLeave:Connect(function()
            if window.activeTab ~= tab then
                TweenService:Create(tabBtn, tweenInfo, {BackgroundColor3 = Color3.fromRGB(0, 0, 0, 0)}):Play()
                tabBtn.BackgroundTransparency = 1
            end
        end)
        
        -- Update canvas size khi có element mới
        contentLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
            tabContent.CanvasSize = UDim2.new(0, 0, 0, contentLayout.AbsoluteContentSize.Y + 20)
        end)
        
        window.tabs[#window.tabs + 1] = tab
        
        -- Select first tab
        if #window.tabs == 1 then
            window:SelectTab(tab)
        end
        
        -- Update tab list canvas size
        tabListLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
            tabList.CanvasSize = UDim2.new(0, 0, 0, tabListLayout.AbsoluteContentSize.Y + 20)
        end)
        
        -- Tạo Button
        function tab:CreateButton(text, callback)
            local btn = Instance.new("TextButton")
            btn.Name = text .. "Button"
            btn.Parent = tabContent
            btn.Size = UDim2.new(1, 0, 0, 35)
            btn.BackgroundColor3 = colors.accent
            btn.BorderSizePixel = 0
            btn.Text = text
            btn.TextColor3 = colors.text
            btn.TextSize = 14
            btn.Font = Enum.Font.Gotham
            
            local btnCorner = Instance.new("UICorner")
            btnCorner.CornerRadius = UDim.new(0, 6)
            btnCorner.Parent = btn
            
            btn.MouseButton1Click:Connect(function()
                if callback then callback() end
            end)
            
            -- Hover effect
            btn.MouseEnter:Connect(function()
                TweenService:Create(btn, tweenInfo, {BackgroundColor3 = colors.active}):Play()
            end)
            
            btn.MouseLeave:Connect(function()
                TweenService:Create(btn, tweenInfo, {BackgroundColor3 = colors.accent}):Play()
            end)
            
            return btn
        end
        
        -- Tạo Toggle
        function tab:CreateToggle(text, defaultValue, callback)
            local toggleFrame = Instance.new("Frame")
            toggleFrame.Name = text .. "Toggle"
            toggleFrame.Parent = tabContent
            toggleFrame.Size = UDim2.new(1, 0, 0, 35)
            toggleFrame.BackgroundColor3 = colors.hover
            toggleFrame.BorderSizePixel = 0
            
            local toggleCorner = Instance.new("UICorner")
            toggleCorner.CornerRadius = UDim.new(0, 6)
            toggleCorner.Parent = toggleFrame
            
            local toggleLabel = Instance.new("TextLabel")
            toggleLabel.Parent = toggleFrame
            toggleLabel.Size = UDim2.new(1, -50, 1, 0)
            toggleLabel.Position = UDim2.new(0, 15, 0, 0)
            toggleLabel.BackgroundTransparency = 1
            toggleLabel.Text = text
            toggleLabel.TextColor3 = colors.text
            toggleLabel.TextSize = 14
            toggleLabel.Font = Enum.Font.Gotham
            toggleLabel.TextXAlignment = Enum.TextXAlignment.Left
            
            local toggleBtn = Instance.new("TextButton")
            toggleBtn.Parent = toggleFrame
            toggleBtn.Size = UDim2.new(0, 25, 0, 15)
            toggleBtn.Position = UDim2.new(1, -35, 0.5, -7.5)
            toggleBtn.BackgroundColor3 = defaultValue and colors.accent or colors.border
            toggleBtn.BorderSizePixel = 0
            toggleBtn.Text = ""
            
            local toggleBtnCorner = Instance.new("UICorner")
            toggleBtnCorner.CornerRadius = UDim.new(0, 8)
            toggleBtnCorner.Parent = toggleBtn
            
            local toggleIndicator = Instance.new("Frame")
            toggleIndicator.Parent = toggleBtn
            toggleIndicator.Size = UDim2.new(0, 11, 0, 11)
            toggleIndicator.Position = defaultValue and UDim2.new(0, 12, 0.5, -5.5) or UDim2.new(0, 2, 0.5, -5.5)
            toggleIndicator.BackgroundColor3 = colors.text
            toggleIndicator.BorderSizePixel = 0
            
            local indicatorCorner = Instance.new("UICorner")
            indicatorCorner.CornerRadius = UDim.new(0, 6)
            indicatorCorner.Parent = toggleIndicator
            
            local toggled = defaultValue or false
            
            toggleBtn.MouseButton1Click:Connect(function()
                toggled = not toggled
                
                local btnColor = toggled and colors.accent or colors.border
                local indicatorPos = toggled and UDim2.new(0, 12, 0.5, -5.5) or UDim2.new(0, 2, 0.5, -5.5)
                
                TweenService:Create(toggleBtn, tweenInfo, {BackgroundColor3 = btnColor}):Play()
                TweenService:Create(toggleIndicator, tweenInfo, {Position = indicatorPos}):Play()
                
                if callback then callback(toggled) end
            end)
            
            return toggleFrame
        end
        
        -- Tạo Input
        function tab:CreateInput(text, placeholder, callback)
            local inputFrame = Instance.new("Frame")
            inputFrame.Name = text .. "Input"
            inputFrame.Parent = tabContent
            inputFrame.Size = UDim2.new(1, 0, 0, 60)
            inputFrame.BackgroundTransparency = 1
            inputFrame.BorderSizePixel = 0
            
            local inputLabel = Instance.new("TextLabel")
            inputLabel.Parent = inputFrame
            inputLabel.Size = UDim2.new(1, 0, 0, 20)
            inputLabel.BackgroundTransparency = 1
            inputLabel.Text = text
            inputLabel.TextColor3 = colors.text
            inputLabel.TextSize = 14
            inputLabel.Font = Enum.Font.Gotham
            inputLabel.TextXAlignment = Enum.TextXAlignment.Left
            
            local inputBox = Instance.new("TextBox")
            inputBox.Parent = inputFrame
            inputBox.Size = UDim2.new(1, 0, 0, 35)
            inputBox.Position = UDim2.new(0, 0, 0, 25)
            inputBox.BackgroundColor3 = colors.hover
            inputBox.BorderSizePixel = 0
            inputBox.PlaceholderText = placeholder or ""
            inputBox.Text = ""
            inputBox.TextColor3 = colors.text
            inputBox.PlaceholderColor3 = colors.textDim
            inputBox.TextSize = 14
            inputBox.Font = Enum.Font.Gotham
            inputBox.ClearTextOnFocus = false
            
            local inputCorner = Instance.new("UICorner")
            inputCorner.CornerRadius = UDim.new(0, 6)
            inputCorner.Parent = inputBox
            
            local inputPadding = Instance.new("UIPadding")
            inputPadding.PaddingLeft = UDim.new(0, 12)
            inputPadding.PaddingRight = UDim.new(0, 12)
            inputPadding.Parent = inputBox
            
            inputBox.FocusLost:Connect(function(enterPressed)
                if callback then callback(inputBox.Text, enterPressed) end
            end)
            
            return inputBox
        end
        
        -- Tạo Toggle Box
        function tab:CreateToggleBox(text, defaultValue, callback)
            local boxFrame = Instance.new("Frame")
            boxFrame.Name = text .. "ToggleBox"
            boxFrame.Parent = tabContent
            boxFrame.Size = UDim2.new(1, 0, 0, 35)
            boxFrame.BackgroundTransparency = 1
            boxFrame.BorderSizePixel = 0
            
            local boxBtn = Instance.new("TextButton")
            boxBtn.Parent = boxFrame
            boxBtn.Size = UDim2.new(0, 120, 1, 0)
            boxBtn.Position = UDim2.new(0.5, -60, 0, 0)
            boxBtn.BackgroundColor3 = defaultValue and colors.accent or colors.hover
            boxBtn.BorderSizePixel = 0
            boxBtn.Text = text
            boxBtn.TextColor3 = colors.text
            boxBtn.TextSize = 14
            boxBtn.Font = Enum.Font.Gotham
            
            local boxCorner = Instance.new("UICorner")
            boxCorner.CornerRadius = UDim.new(0, 6)
            boxCorner.Parent = boxBtn
            
            local toggled = defaultValue or false
            
            boxBtn.MouseButton1Click:Connect(function()
                toggled = not toggled
                
                local btnColor = toggled and colors.accent or colors.hover
                TweenService:Create(boxBtn, tweenInfo, {BackgroundColor3 = btnColor}):Play()
                
                if callback then callback(toggled) end
            end)
            
            return boxBtn
        end
        
        -- Tạo Button Switch
        function tab:CreateButtonSwitch(text, options, defaultIndex, callback)
            local switchFrame = Instance.new("Frame")
            switchFrame.Name = text .. "Switch"
            switchFrame.Parent = tabContent
            switchFrame.Size = UDim2.new(1, 0, 0, 60)
            switchFrame.BackgroundTransparency = 1
            switchFrame.BorderSizePixel = 0
            
            local switchLabel = Instance.new("TextLabel")
            switchLabel.Parent = switchFrame
            switchLabel.Size = UDim2.new(1, 0, 0, 20)
            switchLabel.BackgroundTransparency = 1
            switchLabel.Text = text
            switchLabel.TextColor3 = colors.text
            switchLabel.TextSize = 14
            switchLabel.Font = Enum.Font.Gotham
            switchLabel.TextXAlignment = Enum.TextXAlignment.Left
            
            local switchBtn = Instance.new("TextButton")
            switchBtn.Parent = switchFrame
            switchBtn.Size = UDim2.new(0, 100, 0, 35)
            switchBtn.Position = UDim2.new(0, 0, 0, 25)
            switchBtn.BackgroundColor3 = colors.accent
            switchBtn.BorderSizePixel = 0
            switchBtn.TextColor3 = colors.text
            switchBtn.TextSize = 14
            switchBtn.Font = Enum.Font.Gotham
            
            local switchCorner = Instance.new("UICorner")
            switchCorner.CornerRadius = UDim.new(0, 6)
            switchCorner.Parent = switchBtn
            
            local currentIndex = defaultIndex or 1
            switchBtn.Text = tostring(options[currentIndex])
            
            switchBtn.MouseButton1Click:Connect(function()
                currentIndex = currentIndex + 1
                if currentIndex > #options then
                    currentIndex = 1
                end
                
                switchBtn.Text = tostring(options[currentIndex])
                
                if callback then callback(options[currentIndex], currentIndex) end
            end)
            
            -- Hover effect
            switchBtn.MouseEnter:Connect(function()
                TweenService:Create(switchBtn, tweenInfo, {BackgroundColor3 = colors.active}):Play()
            end)
            
            switchBtn.MouseLeave:Connect(function()
                TweenService:Create(switchBtn, tweenInfo, {BackgroundColor3 = colors.accent}):Play()
            end)
            
            return switchBtn
        end
        
        return tab
    end
    
    -- Select Tab Function
    function window:SelectTab(tab)
        -- Hide all tabs
        for _, t in pairs(self.tabs) do
            t.content.Visible = false
            t.button.BackgroundTransparency = 1
            t.button.TextColor3 = colors.textDim
        end
        
        -- Show selected tab
        tab.content.Visible = true
        tab.button.BackgroundColor3 = colors.accent
        tab.button.BackgroundTransparency = 0
        tab.button.TextColor3 = colors.text
        
        self.activeTab = tab
    end
    
    return window
end

return vClothesUI
